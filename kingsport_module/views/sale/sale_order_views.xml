<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="sale_order_view_form_inherit" model="ir.ui.view">
        <field name="name">sale.order.view.form.inherit</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <button name="%(sale.action_view_sale_advance_payment_inv)d" position="replace"/>
            <button name="%(sale.action_view_sale_advance_payment_inv)d" position="replace">
                <button string="Create Invoice" name="create_invoices" type="object"
                        attrs="{'invisible': [('invoice_status', '!=', 'to invoice')]}"
                        class="btn-primary"/>
            </button>

            <header position="inside">
                <button string="Create Exchange Order" name="create_exchange_order" type="object" attrs="{'invisible': [('state', '!=', 'sale')]}"/>
            </header>

            <field name="payment_term_id" position="after">
                <field name="approval_id"/> 
                <field name="direct_shipping"/>
                <field name="location_id"/>
                <field name="total_cost_price" />
            </field>

            <xpath expr="//tree/field[@name='product_uom_qty']" position="after">
                <field name="location_id"/>
            </xpath>

            <xpath expr="//field[@name='order_line']" position="attributes">
                <attribute name="context">{'so_location_id': location_id, 'default_order_id': active_id}</attribute>
            </xpath>

            <xpath expr="//group//field[@name='price_unit']" position="before">
                <field name="location_id"/>
            </xpath>

            <xpath expr="//form//field[@name='order_line']" position="before">
                <div class="oe_button_box">
                    <button class="oe_stat_button" style="margin-bottom:17px; margin-right:20px"
                        icon="fa-calculator" name="action_view_stock_quant"
                        type="object" string="Choose Location"/>
                </div>
            </xpath>

	        <xpath expr="//tree/field[@name='price_tax']" position="after">
                <field name="cost_price"/>
                <field name="total_cost" invisible="1"/>
            </xpath>

            <xpath expr="//header" position="inside">
                <button name="action_create_down_payment" string="Create Down Payment" attrs="{'invisible': [('state', '!=', 'sale')]}" type="object"/>
            </xpath>

            <field name="origin" position="after">
                <field name="is_exchange_order" readonly="1"/>                
            </field>
            <xpath expr="//group/field[@name='partner_invoice_id']" position="attributes">
                <attribute name="attrs">{'invisible': 1}</attribute>
            </xpath>

            <xpath expr="//group/field[@name='partner_shipping_id']" position="attributes">
                <attribute name="context">{'show_address': 1}</attribute>
                <attribute name="widget">res_partner_many2one</attribute>
                <attribute name="options">{'no_create_edit': True, 'no_create': True}</attribute>
            </xpath>

            <xpath expr="//field[@name='sale_order_template_id']" position="after">
                <field name="original_order_id" readonly="1" attrs="{'invisible': [('is_exchange_order', '=', False)]}"/>
                <field name="is_maintenance_order"/>
                <field name="delivery_order_id" attrs="{'required': [('is_maintenance_order', '=', True)]}"/>
            </xpath>

            <xpath expr="//group/field[@name='partner_shipping_id']"  position="after">
                <label for="contact_name" string="Shipping Contact" class="oe_edit_only"/>
                <div class="oe_edit_only">
                    <field name="contact_name"/>
                </div>
                <field name="phone"/>
                <label for="street" string="Address" class="oe_edit_only"/>
                <div class="o_address_format oe_edit_only">
                    <field name="street" placeholder="Street..." class="o_address_street"/>
                    <field name="street2" placeholder="Street 2..." class="o_address_street"/>
                    <div class="oe_edit_only">
                        <field name="country_id" placeholder="Country" style="width: 49%;"/>
                        <field name="state_id" placeholder="Province" style="width: 49%;"/>
                        <field name="district_id" placeholder="District" style="width: 49%;"/>
                        <field name="ward_id" placeholder="Commune/ Ward" style="width: 49%;"/>
                    </div>
                </div>
            </xpath>

            <xpath expr="//field[@name='require_payment']" position="after">
                <field name="current_location_id" readonly="1" options="{'no_create_edit': True, 'no_create': True}"></field>
            </xpath>
            <!-- <label for="partner_shipping_id" string="Shipping Address" class="oe_read_only"/>
            <div class="oe_read_only">
                <field name="partner_shipping_id" groups="sale.group_delivery_invoice_address" context="{'default_type':'delivery', 'show_address': 1}" widget="res_partner_many2one" options="{&quot;always_reload&quot;: True}"/>
            </div> -->
        </field>
    </record>

    <record id="sale_order_list_select_view_search_inherit" model="ir.ui.view">
        <field name="name">sale.order.list.select.view.search.inherit</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_sales_order_filter"/>
        <field name="arch" type="xml">
            <field name="analytic_account_id" position="after">
                <field name="approval_id"/>
                <field name="location_id"/>
                <filter name="filter_direct_shipping" string="Direct Shipping" domain="[('direct_shipping','=',True)]"/>
                <group expand="0" string="Group By...">
                    <filter name="groupby_approver_id" string="Approver" context="{'group_by': 'approval_id'}"/>
                    <filter name="groupby_location_id" string="Delivery Location" context="{'group_by': 'location_id'}"/>
                </group>
            </field>
        </field>
    </record>

    <record id="sale.action_view_sale_advance_payment_inv" model="ir.actions.act_window">
        <field name="binding_model_id" eval=""/>
    </record>
</odoo>
